-- 获取服务
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- 创建 WindUI 实例
local success, WindUI = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/refs/heads/main/dist/main.lua"))()
end)

if not success or not WindUI then
    warn("WindUI 加载失败！")
    return
end

-- 配置 WindUI
WindUI.TransparencyValue = 0.3
WindUI:SetTheme("Dark")

-- 创建窗口（调整大小适应内容）
local Window = WindUI:CreateWindow({
    Title = "playbreak", 
    Icon = "crown", 
    Author = "渔炒鱼", 
    Folder = "playbreak脚本", 
    Size = UDim2.fromOffset(550, 450), -- 调整为合适的大小
    Theme = "Dark", -- 使用暗色主题
    User = {
        Enabled = true, 
        Anonymous = false, 
        Callback = function() 
        end
    },
    SideBarWidth = 180, -- 调整侧边栏宽度
    ScrollBarEnabled = true -- 启用滚动条以适应更多内容
})

-- 创建标签页（按图片顺序）
local AnnouncementTab = Window:Section({
    Title = "公告", 
    Icon = "message-circle"
})

local FunctionTab = Window:Section({
    Title = "功能", 
    Icon = "server"
})

local DonateTab = Window:Section({
    Title = "赞赏", 
    Icon = "heart"
})

-- ========== 公告标签页内容 ==========
AnnouncementTab:Label({
    Title = "欢迎使用 playbreak 脚本",
    Content = "由 渔炒鱼 制作"
})

AnnouncementTab:Divider()

AnnouncementTab:Label({
    Title = "MCBFUN",
    Content = "MCBFUN 脚本集合\nMCBFUNDNV 系列工具"
})

AnnouncementTab:Divider()

AnnouncementTab:Label({
    Title = "使用说明",
    Content = "1. 选择需要的功能并点击按钮\n2. 脚本将自动从云端加载\n3. 如遇加载失败请检查网络\n4. 确保游戏允许外部请求"
})

AnnouncementTab:Label({
    Title = "更新日志",
    Content = "版本 1.0\n- 初始版本发布\n- 包含基础功能\n- 优化界面布局"
})

AnnouncementTab:Label({
    Title = "免责声明",
    Content = "本脚本仅供学习交流使用\n请遵守游戏规则\n使用者自行承担风险"
})

-- ========== 功能标签页内容 ==========
FunctionTab:Button({
    Title = "主脚本",
    Description = "加载 playbreak 主功能脚本",
    Callback = function()
        WindUI:Notify({
            Title = "主脚本",
            Content = "正在加载主脚本...",
            Duration = 3
        })
        
        task.wait(0.5)
        
        local success, result = pcall(function()
            return loadstring(game:HttpGet("https://raw.githubusercontent.com/MCBFU/roblox/refs/heads/main/playbreakawa", true))()
        end)
        
        if success then
            WindUI:Notify({
                Title = "加载成功",
                Content = "主脚本已加载！",
                Duration = 3
            })
        else
            WindUI:Notify({
                Title = "加载失败",
                Content = "主脚本加载失败：" .. tostring(result),
                Duration = 5
            })
        end
    end
})

FunctionTab:Button({
    Title = "连跳脚本",
    Description = "提供连续跳跃功能",
    Callback = function()
        WindUI:Notify({
            Title = "连跳脚本",
            Content = "正在加载连跳脚本...",
            Duration = 3
        })
        
        task.wait(0.5)
        
        local success, result = pcall(function()
            return loadstring(game:HttpGet("https://raw.githubusercontent.com/MCBfun/roblox/refs/heads/main/LianTiao", true))()
        end)
        
        if success then
            WindUI:Notify({
                Title = "加载成功",
                Content = "连跳脚本已加载！",
                Duration = 3
            })
        else
            WindUI:Notify({
                Title = "加载失败",
                Content = "连跳脚本加载失败：" .. tostring(result),
                Duration = 5
            })
        end
    end
})

FunctionTab:Button({
    Title = "刷票脚本",
    Description = "游戏内刷票功能",
    Callback = function()
        WindUI:Notify({
            Title = "刷票脚本",
            Content = "正在加载刷票脚本...",
            Duration = 3
        })
        
        task.wait(0.5)
        
        local success, result = pcall(function()
            return loadstring(game:HttpGet("https://raw.githubusercontent.com/MCBfun/roblox/refs/heads/main/ShuaPiao", true))()
        end)
        
        if success then
            WindUI:Notify({
                Title = "加载成功",
                Content = "刷票脚本已加载！",
                Duration = 3
            })
        else
            WindUI:Notify({
                Title = "加载失败",
                Content = "刷票脚本加载失败：" .. tostring(result),
                Duration = 5
            })
        end
    end
})

FunctionTab:Button({
    Title = "动作脚本",
    Description = "FE R15 动画播放器",
    Callback = function()
        WindUI:Notify({
            Title = "动作脚本",
            Content = "正在加载动作脚本...",
            Duration = 3
        })
        
        task.wait(0.5)
        
        local success, result = pcall(function()
            return loadstring(game:HttpGet("https://raw.githubusercontent.com/Boxten-Keyes/music/refs/heads/main/music%23%5Bscripts%5D/music%23%5Bmiscellaneous%5D/music%23%5Bfe%20r15%20animation%20player%5D.lua", true))()
        end)
        
        if success then
            WindUI:Notify({
                Title = "加载成功",
                Content = "动作脚本已加载！",
                Duration = 3
            })
        else
            WindUI:Notify({
                Title = "加载失败",
                Content = "动作脚本加载失败：" .. tostring(result),
                Duration = 5
            })
        end
    end
})

FunctionTab:Divider()

-- 额外功能
FunctionTab:Button({
    Title = "复制 Discord",
    Description = "复制 MCBFUN Discord 链接",
    Callback = function()
        setclipboard("discord.gg/mcbfun")
        WindUI:Notify({
            Title = "复制成功",
            Content = "Discord 链接已复制到剪贴板",
            Duration = 3
        })
    end
})

-- ========== 赞赏标签页内容 ==========
DonateTab:Label({
    Title = "支持开发者",
    Content = "如果您觉得脚本好用，可以考虑支持开发者"
})

DonateTab:Label({
    Title = "MCBFUN 社区",
    Content = "加入我们的 Discord 社区\n获取最新脚本和帮助"
})

DonateTab:Button({
    Title = "复制 Discord 链接",
    Description = "discord.gg/mcbfun",
    Callback = function()
        setclipboard("discord.gg/mcbfun")
        WindUI:Notify({
            Title = "已复制",
            Content = "Discord 链接已复制",
            Duration = 3
        })
    end
})

DonateTab:Label({
    Title = "其他支持方式",
    Content = "更多支持方式请联系开发者"
})

-- ========== 额外功能：右键菜单 ==========
local rightClickMenu
pcall(function()
    rightClickMenu = Instance.new("ScreenGui")
    rightClickMenu.Name = "PlaybreakGUI"
    rightClickMenu.Parent = game.CoreGui
    rightClickMenu.ResetOnSpawn = false
end)

-- 添加信息显示
AnnouncementTab:Label({
    Title = "当前状态",
    Content = "玩家: " .. player.Name .. "\n游戏: " .. game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
})

-- 启动时显示欢迎信息
task.wait(1)
WindUI:Notify({
    Title = "playbreak 已启动",
    Content = "欢迎使用渔炒鱼制作的脚本\n当前版本: 1.0",
    Duration = 5
})