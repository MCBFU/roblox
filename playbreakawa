-- ================================
-- ç´§å‡‘ç‰ˆé«˜çº§éªŒè¯ç³»ç»Ÿ v3.4 - *
-- ä½œè€…ï¼šæ¸”å¦™é±¼ | Bç«™ï¼šä½œè€…Bç«™ï¼Ÿ
-- åŠŸèƒ½ï¼šç™½åå•ç›´æ¥å¯åŠ¨ï¼Œé»‘åå•æ˜¾ç¤ºå±è”½ç•Œé¢ï¼Œæ— åå•æç¤ºç”³è¯·æƒé™
-- ================================

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")

-- ç¡®ä¿ç©å®¶å­˜åœ¨
repeat RunService.Heartbeat:Wait() until Players.LocalPlayer
local Player = Players.LocalPlayer
local Gui = Player:WaitForChild("PlayerGui")

-- ================================
-- æ ¸å¿ƒé»‘ç™½åå•é…ç½®ï¼ˆæ”¯æŒ ç©å®¶å/ç”¨æˆ·IDï¼‰
-- ================================
local VerifySystem = {
    -- ç™½åå•é…ç½®
    Whitelist = {
        Names = {
            -- å¡«å†™ç™½åå•ç©å®¶åç§°ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
            "MCBFUNAE",
            "uuuuuuuuuop15"
            "hzhzdyind911"
            "Gtcgtfgy"
        },
        UserIds = {
            -- å¡«å†™ç™½åå•ç”¨æˆ·IDï¼ˆæ•°å­—IDä¼˜å…ˆçº§æ›´é«˜ï¼‰
            12345678
        }
    },
    -- é»‘åå•é…ç½®ï¼ˆæ”¹ä¸ºæ˜¾ç¤ºå±è”½ç•Œé¢ï¼‰
    Blacklist = {
        Names = {
            "awa",
            "ğŸ˜"
        },
        UserIds = {
            12345678,
            87654321
        },
        BlockMessage = "ä½ å·²è¢«æ­¤è„šæœ¬å½»åº•å±è”½"
    },
    -- æ— åå•æç¤ºè¯­
    NoListMessage = "æŠ±æ­‰ï¼Œæ‚¨è¿˜æ²¡æœ‰å‘ä½œè€…ç”³è¯·æƒé™ï¼Œä¸ºåˆ›é€ è‰¯å¥½çš„æ¸¸æˆç¯å¢ƒï¼Œè¯·å‘ä½œè€…ç§ä¿¡æ·»åŠ ç™½åå•ï¼ˆæœªè¢«æ‹‰é»‘ï¼‰",
    -- é»‘åå•ç•Œé¢å›¾ç‰‡ID
    BlockImageId = "rbxassetid://98410293253259"
}

-- ================================
-- é»‘ç™½åå•æ£€æµ‹é€»è¾‘
-- ================================
local function isInWhitelist()
    -- ä¼˜å…ˆæ£€æµ‹ç”¨æˆ·ID
    for _, whitelistId in ipairs(VerifySystem.Whitelist.UserIds) do
        if Player.UserId == whitelistId then
            return true
        end
    end
    -- æ£€æµ‹ç©å®¶åç§°
    for _, whitelistName in ipairs(VerifySystem.Whitelist.Names) do
        if Player.Name == whitelistName then
            return true
        end
    end
    return false
end

local function isInBlacklist()
    -- ä¼˜å…ˆæ£€æµ‹ç”¨æˆ·ID
    for _, bannedId in ipairs(VerifySystem.Blacklist.UserIds) do
        if Player.UserId == bannedId then
            return true
        end
    end
    -- æ£€æµ‹ç©å®¶åç§°
    for _, bannedName in ipairs(VerifySystem.Blacklist.Names) do
        if Player.Name == bannedName then
            return true
        end
    end
    return false
end

-- ================================
-- é»‘åå•å±è”½ç•Œé¢åˆ›å»º
-- ================================
local function createBlockScreen()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "BlockScreen"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.IgnoreGuiInset = true
    ScreenGui.Parent = Gui

    -- å…¨å±é®ç½©
    local FullMask = Instance.new("Frame")
    FullMask.Size = UDim2.new(1, 0, 1, 0)
    FullMask.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    FullMask.BackgroundTransparency = 0.3
    FullMask.ZIndex = 100
    FullMask.Parent = ScreenGui

    -- ä¸­å¿ƒå®¹å™¨
    local CenterContainer = Instance.new("Frame")
    CenterContainer.Size = UDim2.new(0, 350, 0, 450)
    CenterContainer.Position = UDim2.new(0.5, -175, 0.5, -225)
    CenterContainer.BackgroundColor3 = Color3.fromRGB(30, 10, 10)
    CenterContainer.BorderSizePixel = 0
    CenterContainer.ZIndex = 101
    CenterContainer.Parent = FullMask
    Instance.new("UICorner", CenterContainer).CornerRadius = UDim.new(0, 16)

    -- å¤§é”™å·
    local ErrorIcon = Instance.new("TextLabel")
    ErrorIcon.Size = UDim2.new(0, 80, 0, 80)
    ErrorIcon.Position = UDim2.new(0.5, -40, 0.1, 0)
    ErrorIcon.BackgroundTransparency = 1
    ErrorIcon.Text = "âŒ"
    ErrorIcon.TextColor3 = Color3.fromRGB(255, 50, 50)
    ErrorIcon.TextSize = 80
    ErrorIcon.Font = Enum.Font.GothamBold
    ErrorIcon.ZIndex = 102
    ErrorIcon.Parent = CenterContainer

    -- èœé¸Ÿå›¾ç‰‡
    local BlockImage = Instance.new("ImageLabel")
    BlockImage.Size = UDim2.new(0, 180, 0, 180)
    BlockImage.Position = UDim2.new(0.5, -90, 0.3, 0)
    BlockImage.BackgroundTransparency = 1
    BlockImage.Image = VerifySystem.BlockImageId
    BlockImage.ScaleType = Enum.ScaleType.Fit
    BlockImage.ZIndex = 102
    BlockImage.Parent = CenterContainer
    Instance.new("UICorner", BlockImage).CornerRadius = UDim.new(0, 12)

    -- å±è”½æç¤ºæ–‡æœ¬
    local BlockText = Instance.new("TextLabel")
    BlockText.Size = UDim2.new(0.8, 0, 0, 60)
    BlockText.Position = UDim2.new(0.1, 0, 0.75, 0)
    BlockText.BackgroundTransparency = 1
    BlockText.Text = VerifySystem.Blacklist.BlockMessage
    BlockText.TextColor3 = Color3.fromRGB(255, 100, 100)
    BlockText.TextSize = 22
    BlockText.Font = Enum.Font.GothamBold
    BlockText.TextWrapped = true
    BlockText.TextXAlignment = Enum.TextXAlignment.Center
    BlockText.ZIndex = 102
    BlockText.Parent = CenterContainer

    -- å…¥åœºåŠ¨ç”»
    CenterContainer.Position = UDim2.new(0.5, -175, 0.5, -225)
    CenterContainer.BackgroundTransparency = 0.2
    local tween = TweenService:Create(CenterContainer, TweenInfo.new(0.6, Enum.EasingStyle.Back), {
        BackgroundTransparency = 0,
        Position = UDim2.new(0.5, -175, 0.5, -225)
    })
    tween:Play()

    -- é”å®šç•Œé¢ï¼Œæ— æ³•å…³é—­
    FullMask.InputBegan:Connect(function() end)
end

-- ================================
-- è„šæœ¬æ‰§è¡Œå‡½æ•°ï¼ˆç™½åå•ä¸“ç”¨ï¼‰
-- ================================
local function executeScript()
    local url = "https://github.com/MCBFU/roblox/raw/refs/heads/main/pb.on1"

    local success, err = pcall(function()
        local scriptContent = game:HttpGet(url, true)
        if scriptContent then
            loadstring(scriptContent)()
        else
            error("æ— æ³•è·å–è„šæœ¬å†…å®¹")
        end
    end)

    return success, err
end

-- ================================
-- æ‰§è¡Œæ£€æµ‹ï¼ˆè„šæœ¬å¯åŠ¨æ—¶ç«‹å³æ‰§è¡Œï¼‰
-- ================================
if isInBlacklist() then
    wait(0.5)
    createBlockScreen()
    -- ç»ˆæ­¢è„šæœ¬åç»­æ‰§è¡Œ
    return
end

local isWhitelist = isInWhitelist()

-- ================================
-- ç™½åå•éªŒè¯é€šè¿‡åçš„UIå’Œé€»è¾‘
-- ================================
local DepthOfField = Instance.new("DepthOfFieldEffect")
DepthOfField.FarIntensity = 0
DepthOfField.NearIntensity = 0
DepthOfField.InFocusRadius = 0
DepthOfField.Parent = Lighting

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SmallAuthSystem"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.IgnoreGuiInset = false
ScreenGui.Parent = Gui

-- ä¸»å®¹å™¨
local MainContainer = Instance.new("Frame")
MainContainer.Size = UDim2.new(0, 260, 0, 320)
MainContainer.Position = UDim2.new(0.5, -130, 0.35, -160)
MainContainer.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
MainContainer.BackgroundTransparency = 0.1
MainContainer.BorderSizePixel = 0
MainContainer.ClipsDescendants = true
MainContainer.Parent = ScreenGui
Instance.new("UICorner", MainContainer).CornerRadius = UDim.new(0, 12)

-- ç»ç’ƒæ€æ•ˆæœ
local GlassEffect = Instance.new("Frame")
GlassEffect.Size = UDim2.new(1, 0, 1, 0)
GlassEffect.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
GlassEffect.BackgroundTransparency = 0.96
GlassEffect.BorderSizePixel = 0
GlassEffect.ZIndex = 0
GlassEffect.Parent = MainContainer

-- é¡¶éƒ¨æ¡
local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 2)
TopBar.BackgroundColor3 = Color3.fromRGB(0, 150, 220)
TopBar.BorderSizePixel = 0
TopBar.Parent = MainContainer

-- æ ‡é¢˜åŒºåŸŸ
local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 80)
Header.Position = UDim2.new(0, 0, 0, 5)
Header.BackgroundTransparency = 1
Header.Parent = MainContainer

-- å¾½æ ‡
local CustomLogo = Instance.new("Frame")
CustomLogo.Size = UDim2.new(0, 50, 0, 50)
CustomLogo.Position = UDim2.new(0.5, -25, 0, 0)
CustomLogo.BackgroundTransparency = 1
CustomLogo.Parent = Header

local LogoImage = Instance.new("ImageLabel")
LogoImage.Size = UDim2.new(1, 0, 1, 0)
LogoImage.BackgroundTransparency = 1
LogoImage.Image = "rbxassetid://98446998103932"
LogoImage.ScaleType = Enum.ScaleType.Fit
LogoImage.Parent = CustomLogo
Instance.new("UICorner", LogoImage).CornerRadius = UDim.new(0, 8)
Instance.new("UIStroke", LogoImage).Color = Color3.fromRGB(0, 180, 255)

-- æ ‡é¢˜æ–‡æœ¬
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 22)
Title.Position = UDim2.new(0, 0, 0.7, 0)
Title.BackgroundTransparency = 1
Title.Text = "MCBFUNéªŒè¯ç³»ç»Ÿ"
Title.TextColor3 = Color3.fromRGB(240, 240, 255)
Title.TextSize = 18
Title.Font = Enum.Font.GothamBold
Title.Parent = Header

local Author = Instance.new("TextLabel")
Author.Size = UDim2.new(1, 0, 0, 16)
Author.Position = UDim2.new(0, 0, 0.95, 0)
Author.BackgroundTransparency = 1
Author.Text = "ç™½åå•éªŒè¯ | è‡ªåŠ¨å¯åŠ¨è„šæœ¬"
Author.TextColor3 = Color3.fromRGB(170, 180, 200)
Author.TextSize = 10
Author.Font = Enum.Font.Gotham
Author.Parent = Header

-- çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ
local StatusSection = Instance.new("Frame")
StatusSection.Size = UDim2.new(0.85, 0, 0, 120)
StatusSection.Position = UDim2.new(0.075, 0, 0.32, 0)
StatusSection.BackgroundTransparency = 1
StatusSection.Parent = MainContainer

local StatusBox = Instance.new("Frame")
StatusBox.Size = UDim2.new(1, 0, 1, 0)
StatusBox.BackgroundColor3 = Color3.fromRGB(25, 30, 40)
StatusBox.BackgroundTransparency = 0.8
StatusBox.Parent = StatusSection
Instance.new("UICorner", StatusBox).CornerRadius = UDim.new(0, 12)

local StatusIcon = Instance.new("TextLabel")
StatusIcon.Size = UDim2.new(0, 40, 0, 40)
StatusIcon.Position = UDim2.new(0.5, -20, 0.1, 0)
StatusIcon.BackgroundTransparency = 1
StatusIcon.Text = isWhitelist and "âœ…" or "âŒ"
StatusIcon.TextColor3 = isWhitelist and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
StatusIcon.TextSize = 32
StatusIcon.Font = Enum.Font.GothamBold
StatusIcon.Parent = StatusBox

local StatusText = Instance.new("TextLabel")
StatusText.Size = UDim2.new(0.9, 0, 0, 60)
StatusText.Position = UDim2.new(0.05, 0, 0.5, 0)
StatusText.BackgroundTransparency = 1
StatusText.Text = isWhitelist and "ç™½åå•éªŒè¯é€šè¿‡ï¼\næ­£åœ¨å¯åŠ¨è„šæœ¬..." or VerifySystem.NoListMessage
StatusText.TextColor3 = isWhitelist and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 255, 255)
StatusText.TextSize = 14
StatusText.Font = Enum.Font.GothamMedium
StatusText.TextXAlignment = Enum.TextXAlignment.Center
StatusText.TextWrapped = true
StatusText.Parent = StatusBox

-- åº•éƒ¨ä¿¡æ¯
local Footer = Instance.new("Frame")
Footer.Size = UDim2.new(1, 0, 0, 28)
Footer.Position = UDim2.new(0, 0, 1, -28)
Footer.BackgroundColor3 = Color3.fromRGB(15, 20, 30)
Footer.BackgroundTransparency = 0.3
Footer.Parent = MainContainer

local VersionText = Instance.new("TextLabel")
VersionText.Size = UDim2.new(1, 0, 1, 0)
VersionText.BackgroundTransparency = 1
VersionText.Text = "alpha3.4 | é»‘ç™½åå•éªŒè¯ç³»ç»Ÿ"
VersionText.TextColor3 = Color3.fromRGB(120, 140, 160)
VersionText.TextSize = 10
VersionText.Font = Enum.Font.Gotham
VersionText.Parent = Footer

-- å…³é—­æŒ‰é’®
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 22, 0, 22)
CloseButton.Position = UDim2.new(1, -26, 0, 6)
CloseButton.BackgroundColor3 = Color3.fromRGB(40, 45, 55)
CloseButton.AutoButtonColor = false
CloseButton.Text = "Ã—"
CloseButton.TextColor3 = Color3.fromRGB(200, 210, 220)
CloseButton.TextSize = 16
CloseButton.Font = Enum.Font.GothamBold
CloseButton.BorderSizePixel = 0
CloseButton.Parent = MainContainer
Instance.new("UICorner", CloseButton).CornerRadius = UDim.new(0.5, 0)

-- å¤–å‘å…‰æ•ˆæœ
local OuterGlow = Instance.new("ImageLabel")
OuterGlow.Size = UDim2.new(1, 16, 1, 16)
OuterGlow.Position = UDim2.new(0, -8, 0, -8)
OuterGlow.BackgroundTransparency = 1
OuterGlow.Image = "rbxassetid://5554237733"
OuterGlow.ImageColor3 = Color3.fromRGB(0, 100, 200)
OuterGlow.ImageTransparency = 0.85
OuterGlow.ScaleType = Enum.ScaleType.Slice
OuterGlow.SliceCenter = Rect.new(23, 23, 277, 277)
OuterGlow.Parent = MainContainer
OuterGlow.ZIndex = -1

-- ================================
-- åŠ¨ç”»å’Œäº¤äº’é€»è¾‘
-- ================================
local function enableDepthBlur()
    TweenService:Create(DepthOfField, TweenInfo.new(0.8), {
        FarIntensity = 0.8,
        NearIntensity = 0.5,
        InFocusRadius = 50
    }):Play()
end

local function disableDepthBlur()
    TweenService:Create(DepthOfField, TweenInfo.new(0.8), {
        FarIntensity = 0,
        NearIntensity = 0,
        InFocusRadius = 0
    }):Play()
end

local function createTween(obj, props, time)
    return TweenService:Create(obj, TweenInfo.new(time or 0.3), props)
end

enableDepthBlur()
createTween(MainContainer, {
    Position = UDim2.new(0.5, -130, 0.35, -160),
    BackgroundTransparency = 0.1
}, 0.5):Play()

-- å…³é—­æŒ‰é’®äº¤äº’
CloseButton.MouseEnter:Connect(function()
    createTween(CloseButton, {
        BackgroundColor3 = Color3.fromRGB(50, 55, 65),
        Rotation = 90,
        Size = UDim2.new(0, 24, 0, 24)
    }, 0.3):Play()
end)

CloseButton.MouseLeave:Connect(function()
    createTween(CloseButton, {
        BackgroundColor3 = Color3.fromRGB(40, 45, 55),
        Rotation = 0,
        Size = UDim2.new(0, 22, 0, 22)
    }, 0.3):Play()
end)

CloseButton.MouseButton1Click:Connect(function()
    createTween(MainContainer, {
        BackgroundTransparency = 1,
        Position = UDim2.new(0.5, -130, 0.35, -180)
    }, 0.5):Play()
    disableDepthBlur()
    wait(0.8)
    ScreenGui:Destroy()
end)

-- ç™½åå•è‡ªåŠ¨æ‰§è¡Œè„šæœ¬
if isWhitelist then
    wait(1)
    local success, err = executeScript()
    if success then
        StatusText.Text = "è„šæœ¬å¯åŠ¨æˆåŠŸï¼\nå³å°†å…³é—­éªŒè¯çª—å£..."
        wait(1)
        createTween(MainContainer, {
            BackgroundTransparency = 1,
            Position = UDim2.new(0.5, -130, 0.35, -120)
        }, 0.8):Play()
        disableDepthBlur()
        wait(1)
        ScreenGui:Destroy()
    else
        StatusText.Text = "è„šæœ¬å¯åŠ¨å¤±è´¥ï¼š\n" .. tostring(err)
        StatusText.TextColor3 = Color3.fromRGB(255, 100, 100)
        StatusIcon.Text = "âŒ"
        StatusIcon.TextColor3 = Color3.fromRGB(255, 100, 100)
    end
end

-- è°ƒè¯•ä¿¡æ¯
coroutine.wrap(function()
    wait(1)
    if ScreenGui and ScreenGui.Parent then
        print("âœ… éªŒè¯ç³»ç»ŸUIåŠ è½½å®Œæˆ")
        print(isWhitelist and "âœ… ç©å®¶åœ¨ç™½åå•å†…" or "â„¹ï¸ ç©å®¶ä¸åœ¨ä»»ä½•åå•å†…")
    end
end)()