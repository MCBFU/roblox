-- æœ€ç®€å•çš„éŸ³é¢‘æ’­æ”¾è„šæœ¬
local SoundService = game:GetService("SoundService")

-- åˆ›å»ºéŸ³é¢‘å®ä¾‹
local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://133701137571082"  -- æ›¿æ¢ä¸ºä½ çš„éŸ³é¢‘ID
sound.Parent = SoundService

-- æ’­æ”¾éŸ³é¢‘
sound:Play()
write(1)
-- MCB åŒåŠŸèƒ½åŠ è½½å™¨ï¼ˆå¯é‡å¤åŠ è½½ï¼‰
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer

-- åˆ›å»ºUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MCBLoader"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 120, 0, 180)
mainFrame.Position = UDim2.new(0.02, 0, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
mainFrame.BackgroundTransparency = 0.2
mainFrame.BorderSizePixel = 1
mainFrame.BorderColor3 = Color3.fromRGB(80, 80, 100)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

-- åœ†è§’æ•ˆæœ
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 6)
uiCorner.Parent = mainFrame

-- æ ‡é¢˜æ 
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 25)
titleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

-- æ ‡é¢˜æ åœ†è§’
local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 6)
titleCorner.Parent = titleBar

local title = Instance.new("TextLabel")
title.Text = "MCB"
title.Size = UDim2.new(1, -80, 1, 0)
title.Position = UDim2.new(0, 5, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Font = Enum.Font.SourceSansSemibold
title.TextSize = 14
title.Parent = titleBar

-- æ§åˆ¶æŒ‰é’®å®¹å™¨
local controlButtons = Instance.new("Frame")
controlButtons.Name = "ControlButtons"
controlButtons.Size = UDim2.new(0, 75, 1, 0)
controlButtons.Position = UDim2.new(1, -75, 0, 0)
controlButtons.BackgroundTransparency = 1
controlButtons.Parent = titleBar

-- ç¼©å°æŒ‰é’®
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Name = "MinimizeButton"
minimizeBtn.Size = UDim2.new(0, 25, 0, 25)
minimizeBtn.Position = UDim2.new(0, 25, 0, 0)
minimizeBtn.Text = "_"
minimizeBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextSize = 16
minimizeBtn.AutoButtonColor = false
minimizeBtn.Parent = controlButtons

-- å…³é—­æŒ‰é’®
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 25, 0, 25)
closeBtn.Position = UDim2.new(0, 50, 0, 0)
closeBtn.Text = "Ã—"
closeBtn.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 16
closeBtn.AutoButtonColor = false
closeBtn.Parent = controlButtons

-- ==================== æ€ªç‰©æŒ‰é’® ====================
local monsterButton = Instance.new("TextButton")
monsterButton.Name = "MonsterButton"
monsterButton.Size = UDim2.new(1, -10, 0, 60)
monsterButton.Position = UDim2.new(0, 5, 0, 30)
monsterButton.Text = "æ€ªç‰©ä¸“ç”¨"
monsterButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
monsterButton.TextColor3 = Color3.fromRGB(255, 255, 255)
monsterButton.Font = Enum.Font.SourceSansSemibold
monsterButton.TextSize = 14
monsterButton.TextWrapped = true
monsterButton.AutoButtonColor = false
monsterButton.Parent = mainFrame

local monsterCorner = Instance.new("UICorner")
monsterCorner.CornerRadius = UDim.new(0, 5)
monsterCorner.Parent = monsterButton

-- ==================== ä¸“å®¶æŒ‰é’® ====================
local expertButton = Instance.new("TextButton")
expertButton.Name = "ExpertButton"
expertButton.Size = UDim2.new(1, -10, 0, 60)
expertButton.Position = UDim2.new(0, 5, 0, 95)
expertButton.Text = "ä¸“å®¶ä¸“ç”¨"
expertButton.BackgroundColor3 = Color3.fromRGB(60, 140, 200)
expertButton.TextColor3 = Color3.fromRGB(255, 255, 255)
expertButton.Font = Enum.Font.SourceSansSemibold
expertButton.TextSize = 14
expertButton.TextWrapped = true
expertButton.AutoButtonColor = false
expertButton.Parent = mainFrame

local expertCorner = Instance.new("UICorner")
expertCorner.CornerRadius = UDim.new(0, 5)
expertCorner.Parent = expertButton

-- çŠ¶æ€æ˜¾ç¤ºï¼ˆç¼©å°åï¼‰
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(1, -10, 1, -10)
statusLabel.Position = UDim2.new(0, 5, 0, 5)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = " "
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 220)
statusLabel.TextSize = 12
statusLabel.TextWrapped = true
statusLabel.Visible = false
statusLabel.Parent = mainFrame

-- å˜é‡
local isMinimized = false
local originalSize = mainFrame.Size
local originalPosition = mainFrame.Position
local minimizedSize = UDim2.new(0, 80, 0, 40)

-- æŒ‰é’®æ‚¬åœæ•ˆæœå‡½æ•°
local function setupButtonHover(button)
    local originalColor = button.BackgroundColor3

    button.MouseEnter:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(
                math.min(255, originalColor.R * 255 + 30),
                math.min(255, originalColor.G * 255 + 30),
                math.min(255, originalColor.B * 255 + 30)
            )
        })
        tween:Play()
    end)

    button.MouseLeave:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = originalColor
        })
        tween:Play()
    end)
end

-- åº”ç”¨æ‚¬åœæ•ˆæœ
setupButtonHover(monsterButton)
setupButtonHover(expertButton)
setupButtonHover(minimizeBtn)
setupButtonHover(closeBtn)

-- ==================== æŒ‰é’®åŠŸèƒ½ ====================
-- åŠ è½½æ€ªç‰©è„šæœ¬ï¼ˆå¯é‡å¤åŠ è½½ï¼‰
local function loadMonsterScript()
    local originalText = monsterButton.Text
    
    monsterButton.Text = "æ€ªç‰©ä¸“ç”¨..."
    monsterButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
    
    -- åŠ è½½æ€ªç‰©è„šæœ¬
    local success, errorMsg = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/MCBfun/roblox/refs/heads/main/KILLaura%20"))()
    end)
    
    if success then
        monsterButton.Text = "æ€ªç‰©ä¸“ç”¨"
        monsterButton.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
        
        if isMinimized then
            statusLabel.Text = "MCB"
        end
        
        -- 2ç§’åæ¢å¤å¯ç‚¹å‡»çŠ¶æ€
        task.wait(2)
        monsterButton.Text = "æ€ªç‰©ä¸“ç”¨"
        monsterButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
    else
        monsterButton.Text = "X"
        monsterButton.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
        
        warn("[MCB] æ€ªç‰©è„šæœ¬åŠ è½½å¤±è´¥: " .. tostring(errorMsg))
        
        -- 2ç§’åæ¢å¤å¯ç‚¹å‡»çŠ¶æ€
        task.wait(2)
        monsterButton.Text = "æ€ªç‰©ä¸“ç”¨"
        monsterButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
    end
end

-- åŠ è½½ä¸“å®¶è„šæœ¬ï¼ˆå¯é‡å¤åŠ è½½ï¼‰
local function loadExpertScript()
    local originalText = expertButton.Text
    
    expertButton.Text = "ä¸“å®¶ä¸“ç”¨..."
    expertButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
    
    -- åŠ è½½ä¸“å®¶è„šæœ¬
    local success, errorMsg = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/MCBfun/roblox/refs/heads/main/Expert"))()
    end)
    
    if success then
        expertButton.Text = "ä¸“å®¶ä¸“ç”¨"
        expertButton.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
        
        if isMinimized then
            statusLabel.Text = "MCB"
        end
        
        -- 2ç§’åæ¢å¤å¯ç‚¹å‡»çŠ¶æ€
        task.wait(2)
        expertButton.Text = "ä¸“å®¶ä¸“ç”¨"
        expertButton.BackgroundColor3 = Color3.fromRGB(60, 140, 200)
    else
        expertButton.Text = "X"
        expertButton.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
        
        warn("[MCB] ä¸“å®¶è„šæœ¬åŠ è½½å¤±è´¥: " .. tostring(errorMsg))
        
        -- 2ç§’åæ¢å¤å¯ç‚¹å‡»çŠ¶æ€
        task.wait(2)
        expertButton.Text = "ä¸“å®¶ä¸“ç”¨"
        expertButton.BackgroundColor3 = Color3.fromRGB(60, 140, 200)
    end
end

-- æŒ‰é’®ç‚¹å‡»äº‹ä»¶
monsterButton.MouseButton1Click:Connect(function()
    loadMonsterScript()
end)

expertButton.MouseButton1Click:Connect(function()
    loadExpertScript()
end)

-- ç¼©å°åŠŸèƒ½
minimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized

    if isMinimized then
        -- ç¼©å°åŠ¨ç”»ï¼Œä¿æŒå½“å‰ä½ç½®
        local currentPos = mainFrame.Position
        local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
            Size = minimizedSize,
            Position = currentPos
        })
        tween:Play()

        tween.Completed:Wait()  -- ç­‰å¾…åŠ¨ç”»å®Œæˆ

        monsterButton.Visible = false
        expertButton.Visible = false
        statusLabel.Visible = true
        minimizeBtn.Text = "+"
        title.Text = "ğŸ¯"
        
        -- æ›´æ–°çŠ¶æ€æ–‡æœ¬
        statusLabel.Text = "ğŸ˜“"

    else
        -- æ¢å¤æ˜¾ç¤º
        monsterButton.Visible = true
        expertButton.Visible = true
        statusLabel.Visible = false
        minimizeBtn.Text = "_"
        title.Text = "MCBFUN"

        -- æ¢å¤å¤§å°ï¼Œä¿æŒå½“å‰ä½ç½®
        local currentPos = mainFrame.Position
        local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
            Size = originalSize,
            Position = currentPos
        })
        tween:Play()
    end
end)

-- å…³é—­åŠŸèƒ½
closeBtn.MouseButton1Click:Connect(function()
    -- æ·¡å‡ºåŠ¨ç”»
    local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
        BackgroundTransparency = 0.8,
        Position = mainFrame.Position + UDim2.new(0, 0, 0, -20)
    })
    tween:Play()

    tween.Completed:Wait()  -- ç­‰å¾…åŠ¨ç”»å®Œæˆ
    screenGui:Destroy()
end)

-- å¿«æ·é”®
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end

    -- Ké”®ï¼šåŠ è½½æ€ªç‰©è„šæœ¬
    if input.KeyCode == Enum.KeyCode.K then
        loadMonsterScript()
    end

    -- Eé”®ï¼šåŠ è½½ä¸“å®¶è„šæœ¬
    if input.KeyCode == Enum.KeyCode.E then
        loadExpertScript()
    end

    -- Mé”®ï¼šç¼©å°/æ”¾å¤§
    if input.KeyCode == Enum.KeyCode.M then
        isMinimized = not isMinimized

        if isMinimized then
            local currentPos = mainFrame.Position
            local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
                Size = minimizedSize,
                Position = currentPos
            })
            tween:Play()

            tween.Completed:Wait()

            monsterButton.Visible = false
            expertButton.Visible = false
            statusLabel.Visible = true
            minimizeBtn.Text = "+"
            title.Text = "âœï¸"
            
            statusLabel.Text = "MCB\nç‚¹å‡»å±•å¼€"

        else
            monsterButton.Visible = true
            expertButton.Visible = true
            statusLabel.Visible = false
            minimizeBtn.Text = "_"
            title.Text = "MCB"

            local currentPos = mainFrame.Position
            local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
                Size = originalSize,
                Position = currentPos
            })
            tween:Play()
        end
    end
end)

-- åˆå§‹æ·¡å…¥åŠ¨ç”»
local originalPosition = UDim2.new(0.02, 0, 0.3, 0)
mainFrame.BackgroundTransparency = 1
mainFrame.Position = originalPosition + UDim2.new(0, 0, 0, -30)

task.wait(0.1)

local fadeInTween = TweenService:Create(mainFrame, TweenInfo.new(0.5), {
    BackgroundTransparency = 0.2,
    Position = originalPosition
})
fadeInTween:Play()