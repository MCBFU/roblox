-- åŒéŸ³æ•ˆIDæ›¿æ¢è„šæœ¬
local replacements = {
    {old = "6027236630", new = "119031191462818"},--æ¿æ¿è·³è·ƒ
    {old = "119547018329590", new = "15689445424"},--ç«è½¦é€ƒç¦»
    {old = "9042971851", new = "133701137571082"},--å¼€å¯æ–°åœ°å›¾æ¸¸æˆ
    {old = "6794886454", new = "94624102598882"},--å…”å­éŸ³ç¬¦ç›’
    {old = "268933841", new = "9043491257"},--è½åœ°
    {old = "81953263341178", new = "94624102598882"},--å°å“ˆå‰çªè„¸
    {old = "6052548458", new = "7390036132"},
    {old = "4697381311", new = "94624102598882"},--å“ˆå‰å†²åˆºçªè„¸
    {old = "17779172376", new = "15689451063"}--æ€ªç‰©é€‰æ‹©ç•Œé¢
}  -- è¿™é‡Œæ·»åŠ äº†ç¼ºå¤±çš„ }

-- æ›¿æ¢å‡½æ•°
local function replaceSound(sound)
    if sound and sound:IsA("Sound") then
        local id = tostring(sound.SoundId)
        local replaced = false
        
        for _, rep in pairs(replacements) do
            if rep.old ~= "" and string.find(id, rep.old) then
                if rep.new ~= "" then
                    sound.SoundId = string.gsub(id, rep.old, rep.new)
                    replaced = true
                else
                    -- å¦‚æœæ–°IDä¸ºç©ºï¼Œå¯ä»¥åˆ é™¤æˆ–é™éŸ³éŸ³æ•ˆ
                    sound.Volume = 0
                    sound:Destroy()  -- æˆ–è€…ç›´æ¥åˆ é™¤
                    replaced = true
                end
            end
        end
        
        return replaced
    end
    return false
end

-- æ‰§è¡Œæ›¿æ¢
local count = 0
for _, obj in pairs(game:GetDescendants()) do
    if replaceSound(obj) then
        count = count + 1
    end
end

-- ç›‘æ§æ–°éŸ³æ•ˆ
game.DescendantAdded:Connect(function(obj)
    task.wait(0.05)
    replaceSound(obj)
end)


-- å¼ºåˆ¶ä¼˜å…ˆåŠ è½½playbreakï¼ˆå¿…å†™åœ¨æœ€é¡¶éƒ¨ï¼‰
local success, Library = pcall(function()
    return loadstring(game:HttpGet("https://gitee.com/cmbhbh/ycgui/raw/master/YCmain.lua"))()
end)

if not success then
    warn("playbreakåŠ è½½å¤±è´¥ï¼è¯·æ›´æ¢æœ‰æ•ˆé“¾æ¥ï¼Œæ¨èå¤‡ç”¨é“¾æ¥ï¼šhttps://raw.githubusercontent.com/zzerexx/scripts/main/yc.lua")
    return
end

-- ========== 1. å…ˆåˆ›å»ºUIç»“æ„ï¼ˆé¡ºåºç»å¯¹ä¸èƒ½ä¹±ï¼‰ ==========
local Main = Library:CreateMainControl("playbreak")
local CombatWin = Library:CreateChildWindow("Monster") -- å…¨åŠŸèƒ½çª—å£
local VisualsWin = Library:CreateChildWindow("Expert")

Main:BindWindow("Monster", false)
Main:BindWindow("Expert", false)

-- ========== 2. å…¨å±€å˜é‡ä¸æ ¸å¿ƒæœåŠ¡ ==========
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Workspace = game:GetService("Workspace")
local SoundService = game:GetService("SoundService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local camera = Workspace.CurrentCamera
local isAuraActive = false
local pipeInProgress = false
local renderConnection

-- å¯é…ç½®å‚æ•°ï¼ˆæ»‘å—æ§åˆ¶ï¼‰
local Settings = {
    auraDistance = 300,      -- æ”»å‡»è·ç¦»
    attackInterval = 0.1,    -- æ”»å‡»é—´éš”
    teleportHeight = 0,      -- ä¼ é€é«˜åº¦è¡¥å¿
    pipeSpeed = 0.1          -- æ¯æ¬¡ä¼ é€é—´éš”
}

-- è‡´å‘½ç®¡é“åæ ‡ï¼ˆä¿®å¤è¯­æ³•é”™è¯¯ï¼šè¡¥å……åˆ†éš”ç¬¦ã€å»é‡ï¼‰
local allPipeLocations = {
    Vector3.new(43.06, 68.98, -254.75),
    Vector3.new(-0.53, 71.14, -329.87),
    Vector3.new(12.90, 94.29, -531.77),
    Vector3.new(-13.55, 87.70, -455.12),
    Vector3.new(-38.72, 87.45, -269.56),
    Vector3.new(-60.21, 105.48, -156.82),
    Vector3.new(-44.85, 112.19, -398.75),
    Vector3.new(73.64, 105.44, -404.03),
    Vector3.new(327.87, 37.94, 246.22),
    Vector3.new(386.97, 7.47, 331.48),
    Vector3.new(408.68, 34.45, 169.92),
    Vector3.new(335.75, 18.12, 205.47),
    Vector3.new(406.35, 33.01, 375.60),
    Vector3.new(359.39, 18.07, 437.61),
    Vector3.new(184.68, 18.11, 245.28),
    Vector3.new(312.79, 10.66, 351.58),
    Vector3.new(358.95, 18, 436.84),
    Vector3.new(-367.8, 5.0, -272.1),
    Vector3.new(-196.9, 63.4, -306.7),
    Vector3.new(-269.1, 4.8, -499.9),
    Vector3.new(-151.4, 63.4, -514.7),
    Vector3.new(-177.8, 30.4, -398.7),
    Vector3.new(-420.1, 30.3, -407.2),
    Vector3.new(-265.7, 4.9, -621.5),
    Vector3.new(-343.5, 4.8, -621.5),
    Vector3.new(-345.4, 4.9, -561.1),
    Vector3.new(42.9, 7.7, -687.2)
}

-- ========== 3. è¾…åŠ©å‡½æ•° ==========
-- ç¨³å®šè·å–æ ¹éƒ¨ä»¶
local function getRootPart()
    local char = player.Character or player.CharacterAdded:Wait(5)
    if not char then return nil end
    return char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso")
end

-- æ’­æ”¾éŸ³æ•ˆ
local function playSound()
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://98446998103932"
    sound.Parent = SoundService
    sound:Play()
    sound.Ended:Connect(function() sound:Destroy() end)
end

-- ç¼ºå¤±çš„é€šçŸ¥å‡½æ•°ï¼ˆç©ºå®ç°ï¼Œä¸å¼¹å‡ºæç¤ºï¼‰
local function createExpertNotification(text, color)
    -- ç©ºå‡½æ•°ï¼Œä¸å‘é€ä»»ä½•æç¤º
end

-- Expertä¼ é€å‡½æ•°ï¼ˆå»é‡+ä¿®å¤ï¼Œæ— æç¤ºï¼‰
local function performExpertTeleport(location, locationName)
    local character = player.Character
    if not character then 
        return false 
    end

    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then 
        return false 
    end

    local teleportPos = Vector3.new(location.X, location.Y, location.Z)
    humanoidRootPart.CFrame = CFrame.new(teleportPos)
    return true
end

-- ========== 5. ExpertåŠŸèƒ½ - ä»™äººæ¨¡å¼ï¼ˆä¼˜åŒ–ç‰ˆï¼Œæ— æç¤ºï¼‰ ==========
local isNinjaModeActive = false
local originalWalkSpeed = 16
local originalJumpPower = 50
local ninjaModeMultiplier = 2.5
local infiniteJumpEnabled = false
local noclipEnabled = false
local ninjaModeConnection = nil
local noclipConnection = nil

-- ç©¿å¢™åŠŸèƒ½ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
local function enableNoclip()
    if noclipConnection then return end
    noclipConnection = RunService.Stepped:Connect(function()
        local character = player.Character
        if character and noclipEnabled and isNinjaModeActive then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end)
end

local function disableNoclip()
    if noclipConnection then
        noclipConnection:Disconnect()
        noclipConnection = nil
        -- æ¢å¤ç¢°æ’
        local character = player.Character
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end

local function startNinjaMode()
    if isNinjaModeActive then return end

    local character = player.Character
    if not character then 
        return false 
    end

    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then 
        return false 
    end

    originalWalkSpeed = humanoid.WalkSpeed
    originalJumpPower = humanoid.JumpPower
    isNinjaModeActive = true
    infiniteJumpEnabled = true
    noclipEnabled = true

    humanoid.WalkSpeed = originalWalkSpeed * ninjaModeMultiplier
    humanoid.JumpPower = originalJumpPower * 3

    -- æ— é™è·³è·ƒï¼ˆä¼˜åŒ–é˜²æŠ½æï¼‰
    ninjaModeConnection = UserInputService.JumpRequest:Connect(function()
        if infiniteJumpEnabled and character and character:FindFirstChild("Humanoid") and character.Humanoid.FloorMaterial == Enum.Material.Air then
            character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end)

    enableNoclip()
    return true
end

local function stopNinjaMode()
    if not isNinjaModeActive then return end
    isNinjaModeActive = false
    infiniteJumpEnabled = false
    noclipEnabled = false

    -- å…ˆå…³é—­è·³è·ƒ
    if ninjaModeConnection then
        ninjaModeConnection:Disconnect()
        ninjaModeConnection = nil
    end

    -- ç„¶åå…³é—­ç©¿å¢™
    disableNoclip()

    -- æœ€åæ¢å¤å±æ€§ï¼ˆé˜²æ­¢æŠ½æï¼‰
    task.wait(0.05)

    local character = player.Character
    if character then
        local humanoid = character:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = originalWalkSpeed
            humanoid.JumpPower = originalJumpPower
        end
    end
end

-- ========== è§’è‰²é‡ç”Ÿå¤„ç† ==========
player.CharacterAdded:Connect(function(character)
    task.wait(0.5)
    if isNinjaModeActive then
        local humanoid = character:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = originalWalkSpeed * ninjaModeMultiplier
            humanoid.JumpPower = originalJumpPower * 3
            if noclipEnabled then
                enableNoclip()
            end
        end
    end
end)

-- Expertåæ ‡å®šä¹‰
local expertLocations = {
    backroom = {X = 163.15, Y = 9, Z = 955.4, Name = "ç­‰å€™å…"},
    theaterFactory = {X = 0, Y = -297, Z = 0, Name = "å‰§é™¢/å·¥å‚"},
    sewer = {X = 356, Y = 528, Z = -179, Name = "ä¸‹æ°´é“"}
}

-- ========== 6. Monsterçª—å£åŠŸèƒ½ ==========
-- 6.1 æ€æˆ®å…‰ç¯ï¼ˆä¿æŒåŸæœ‰é€»è¾‘+ä¿®å¤æ–­å¼€è¿æ¥ï¼Œæ— æç¤ºï¼‰
local function auraMainLoop()
    local root = getRootPart()
    if not root or not isAuraActive then return end

    local nearestTarget, minDist = nil, math.huge
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= player and p.Character then
            local tRoot = p.Character:FindFirstChild("HumanoidRootPart")
            local hum = p.Character:FindFirstChild("Humanoid")
            if tRoot and hum and hum.Health > 0 then
                local dist = (root.Position - tRoot.Position).Magnitude
                if dist < Settings.auraDistance and dist < minDist then
                    minDist = dist
                    nearestTarget = tRoot
                end
            end
        end
    end

    if nearestTarget then
        root.CFrame = CFrame.new(nearestTarget.Position.X, nearestTarget.Position.Y + Settings.teleportHeight, nearestTarget.Position.Z)
        camera.CFrame = CFrame.lookAt(camera.CFrame.Position, nearestTarget.Position)
        if tick() % Settings.attackInterval < 0.01 then
            VirtualInputManager:SendMouseButtonEvent(0,0,0,true,game,0)
            task.wait(0.005)
            VirtualInputManager:SendMouseButtonEvent(0,0,0,false,game,0)
        end
    end
end

local function toggleAura(state)
    isAuraActive = state
    if state then
        renderConnection = RunService.RenderStepped:Connect(auraMainLoop)
        playSound()
    else
        if renderConnection then 
            renderConnection:Disconnect()
            renderConnection = nil
        end
    end
end

-- 6.2 è‡´å‘½ç®¡é“ï¼ˆæ— æç¤ºï¼‰
local function performAutoPipeTeleport()
    if pipeInProgress then
        return
    end
    pipeInProgress = true

    local root = getRootPart()
    if not root then
        pipeInProgress = false
        return
    end

    local originalCFrame = root.CFrame

    task.spawn(function()
        for i, pos in ipairs(allPipeLocations) do
            local r = getRootPart()
            if not r or not pipeInProgress then break end
            r.CFrame = CFrame.new(pos.X, pos.Y + Settings.teleportHeight, pos.Z)
            task.wait(Settings.pipeSpeed)
        end
        local r = getRootPart()
        if r then r.CFrame = originalCFrame end
        pipeInProgress = false
    end)
end

-- 6.3 è½®æµä¼ é€ï¼ˆæ— æç¤ºï¼‰
local cycleTeleportIndex = 1
local function performCycleTeleport()
    if pipeInProgress then
        return
    end
    local root = getRootPart()
    if not root then
        return
    end

    local validPlayers = {}
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= player and p.Character then
            local tRoot = p.Character:FindFirstChild("HumanoidRootPart")
            local hum = p.Character:FindFirstChild("Humanoid")
            if tRoot and hum and hum.Health > 0 then
                table.insert(validPlayers, p)
            end
        end
    end

    if #validPlayers == 0 then
        return
    end

    cycleTeleportIndex = cycleTeleportIndex % #validPlayers + 1
    local target = validPlayers[cycleTeleportIndex]
    local tRoot = target.Character:FindFirstChild("HumanoidRootPart")
    root.CFrame = CFrame.new(tRoot.Position.X, tRoot.Position.Y + Settings.teleportHeight, tRoot.Position.Z)
end

-- ========== 7. æ’­æ”¾ExpertéŸ³æ•ˆ ==========
local function playExpertSound()
    local success, soundError = pcall(function()
        local expertSound = Instance.new("Sound")
        expertSound.SoundId = "rbxassetid://7390036132"
        expertSound.Parent = SoundService
        expertSound:Play()
        expertSound.Ended:Connect(function() expertSound:Destroy() end)
    end)

    if not success then
        warn("ExpertéŸ³é¢‘åŠ è½½å¤±è´¥ï¼Œä½†åŠŸèƒ½æ­£å¸¸å¯ç”¨")
    end
end

-- ========== 9. åˆ›å»ºMonsterçª—å£åŠŸèƒ½æ¨¡å— ==========
-- åªä¿ç•™æ”»å‡»è·ç¦»æ»‘å—å’Œæ¯æ¬¡ä¼ é€é—´éš”æ»‘å—
local Aura = CombatWin:CreateModule("æ€æˆ®å…‰ç¯", toggleAura)
Aura:CreateSlider("æ”»å‡»è·ç¦»", 1, 500, 300, function(val)
    Settings.auraDistance = val
end)

local Pipe = CombatWin:CreateModule("è‡´å‘½ç®¡é“", performAutoPipeTeleport)
Pipe:CreateSlider("æ¯æ¬¡ä¼ é€é—´éš”", 0.01, 1.0, 0.1, function(val)
    Settings.pipeSpeed = val
end)

CombatWin:CreateModule("è½®æµä¼ é€", performCycleTeleport)

-- ========== 10. åˆ›å»ºExpertçª—å£åŠŸèƒ½æ¨¡å— ==========
VisualsWin:CreateModule("ä¼ é€ç­‰å€™å…", function()
    performExpertTeleport(expertLocations.backroom, expertLocations.backroom.Name)
end)

VisualsWin:CreateModule("ä¸‡èƒ½ä¼ é€", function()
    performExpertTeleport(expertLocations.theaterFactory, expertLocations.theaterFactory.Name)
end)

VisualsWin:CreateModule("ä¼ é€ä¸‹æ°´é“", function()
    performExpertTeleport(expertLocations.sewer, expertLocations.sewer.Name)
end)

local NinjaModule = VisualsWin:CreateModule("ä»™äººæ¨¡å¼", function(state)
    if state then
        startNinjaMode()
    else
        stopNinjaMode()
        print("çœ‹ä»€ä¹ˆçœ‹,æ²¡è§è¿‡è¾“å‡ºå•ŠğŸ˜¡")
    end
end)

-- ========== 11. å¿«æ·é”®æ§åˆ¶ ==========
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed then
        -- å³Ctrlå¼€å…³æ€æˆ®å…‰ç¯
        if input.KeyCode == Enum.KeyCode.RightControl then
            isAuraActive = not isAuraActive
            toggleAura(isAuraActive)

        -- ExpertåŠŸèƒ½å¿«æ·é”®
        elseif input.KeyCode == Enum.KeyCode.B then
            performExpertTeleport(expertLocations.backroom, expertLocations.backroom.Name)
        elseif input.KeyCode == Enum.KeyCode.T then
            performExpertTeleport(expertLocations.theaterFactory, expertLocations.theaterFactory.Name)
        elseif input.KeyCode == Enum.KeyCode.S then
            performExpertTeleport(expertLocations.sewer, expertLocations.sewer.Name)
        elseif input.KeyCode == Enum.KeyCode.N then
            if isNinjaModeActive then
                stopNinjaMode()
            else
                startNinjaMode()
            end
        end
    end
end)

-- ========== æ–°å¢ï¼šè‡ªæ€é€‰é¡¹ï¼ˆæ— æç¤ºï¼‰ ==========
VisualsWin:CreateModule("è‡ªæ€", function()
    local character = player.Character
    if not character then
        return 
    end

    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then 
        return 
    end

    -- ç›´æ¥è®¾ç½®è¡€é‡ä¸º0
    humanoid.Health = 0
end)

-- ========== 12. åˆå§‹åŒ– ==========
-- æ’­æ”¾ExpertåŠ è½½éŸ³æ•ˆ
task.wait(0.5)
playExpertSound()

-- è®¾ç½®playbreak
Library:SetupSettings()

-- å®Œæ•´æœç´¢æ‰€æœ‰GUI
local translation = {
    ["By BeiHai"] = "BY | æ¸”ç‚’é±¼",
    ["YC GUI"] = "playbreak",
}

-- æ£€æŸ¥ä¸‰ä¸ªåœ°æ–¹
local places = {
    game.Players.LocalPlayer:WaitForChild("PlayerGui"),
    game:GetService("CoreGui"),
    game:GetService("StarterGui")
}

for _, gui in pairs(places) do
    for _, obj in pairs(gui:GetDescendants()) do
        if obj:IsA("TextLabel") or obj:IsA("TextButton") or obj:IsA("TextBox") then
            local text = obj.Text
            if text then
                for eng, chi in pairs(translation) do
                    if text == eng then
                        obj.Text = chi
                        break
                    elseif text:find(eng, 1, true) then
                        obj.Text = text:gsub(eng, chi)
                        break
                    end
                end
            end
        end
    end
end

-- æ–°å¢ï¼šé˜²å¡æ­»å¤„ç†ï¼ˆå¼ºåˆ¶å…³é—­æ‰€æœ‰è¿æ¥ï¼‰
game.Close:Connect(function()
    if renderConnection then renderConnection:Disconnect() end
    if ninjaModeConnection then ninjaModeConnection:Disconnect() end
    if noclipConnection then noclipConnection:Disconnect() end
    pipeInProgress = false
    isAuraActive = false
    isNinjaModeActive = false
end)
Wait(2)
Library:Notify("æ¬¢è¿ä½¿ç”¨", true)
Wait(1)
Library:Notify("å·²é€‚é…æ–°åœ°å›¾ç®¡é“", true)
Wait(1)
Library:Notify("å·²æ¿€æ´»å†…ç½®éŸ³æ•ˆåŒ…", true)